<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
<title>AsyncTaskæºç è§£æ - å¼€é£æœºçš„è€èˆ’å…‹</title>
<meta name="description" content="Follow your heart">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link type='text/css' rel='stylesheet' href='http://xuanguofeng.com/styles/main.css' media='screen' />
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css">
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">

<script type="text/javascript" src='http://xuanguofeng.com/media/scripts/jquery.js'></script>
<script type="text/javascript" src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>

<script>
    hljs.initHighlightingOnLoad();
</script>
</head>

<body>
  <div class="layout theme-dark">
    <div class="layout-header">

	<div class="layout-header-main">
		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">

					<div class="navbar">

						<div class="logo">
							<a href="http://xuanguofeng.com">
								<img class="logo"
									src="http://xuanguofeng.com/media/images/site_avatar.png?v=1594180321706"
									alt="">
							</a>
						</div>

						<div class="menu d-md-inline-block d-none">
							<ul class="layout-navigation-list">
								
								<li class="layout-navigation-item"><a title="é¦–é¡µ"
										href="/">é¦–é¡µ</a>
								</li>
								
								<li class="layout-navigation-item"><a title="ç›®å½•"
										href="/archives">ç›®å½•</a>
								</li>
								
								<li class="layout-navigation-item"><a title="æ ‡ç­¾"
										href="/tags">æ ‡ç­¾</a>
								</li>
								
								<li class="layout-navigation-item"><a title="è¯»ä¹¦"
										href="http://xuanguofeng.com/post/book/">è¯»ä¹¦</a>
								</li>
								
								<li class="layout-navigation-item"><a title="å…³äº"
										href="/post/about">å…³äº</a>
								</li>
								
							</ul>
						</div>

						<div class="item d-md-inline-block d-none">
							<div class="search-icon">
								<i class="fa fa-search" aria-hidden="true"></i>
							</div>
						</div>



						<div class="d-md-inline-block d-none">
							<div class="search-lightbox">
								<div class="search-body">

									<form id="gridea-search-form" data-update="1594180321706" action="/search/" class="search-form">
										<input type="text" name="q" id="s" value="" class="search-field" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯" aria-label="è¯·è¾“å…¥æœç´¢å…³é”®è¯" required="">
										<button type="submit" class="submit" aria-label="Submit">
											<i class="fa fa-search" aria-hidden="true"></i>
										</button>
									</form>

								</div>
							</div>
						</div>

						<div class="nav d-md-none d-inline-block">
							<div class="trigger">
								<i class="fa fa-bars layout-btn-toggle" aria-hidden="true"></i>
							</div>
						</div>

					</div>

				</div>
			</div>




		</div>
	</div>

</div>
    <div class="layout-collapse d-md-none">
	<div class="layout-collapse-main">
		<ul class="layout-collapse-list">
			
			<li class="layout-collapse-item"><a title="é¦–é¡µ" href="/">é¦–é¡µ</a></li>
			
			<li class="layout-collapse-item"><a title="ç›®å½•" href="/archives">ç›®å½•</a></li>
			
			<li class="layout-collapse-item"><a title="æ ‡ç­¾" href="/tags">æ ‡ç­¾</a></li>
			
			<li class="layout-collapse-item"><a title="è¯»ä¹¦" href="http://xuanguofeng.com/post/book/">è¯»ä¹¦</a></li>
			
			<li class="layout-collapse-item"><a title="å…³äº" href="/post/about">å…³äº</a></li>
			

		</ul>
	</div>
</div>

    <div class="layout-content">
      <div class="layout-content-main">
        <div class="container">
          <div class="row justify-content-lg-center">
            <div class="col-12 col-lg-9">
              <div class="layout-post">
                <div class="layout-post-body">
                  <div class="row">

                    <div class="col-12 col-lg-10">
                      <div class="layout-post-main m-right m-md-right">
                        <div class="layout-post-header">
                          <h1 class="layout-post-title">AsyncTaskæºç è§£æ</h1>
                          <div class="layout-post-meta">
                            <div class="item">
                               <a href="http://xuanguofeng.com/tag/yuan-ma-jie-xi/" class="post--keyword"
                                data-title="æºç è§£æ" data-type="post_tag" data-term-id="39">æºç è§£æ</a>
                              
                            </div>
                            <div class="item">
                              <span>2019-03-15</span>
                            </div>
                          </div>
                        </div>
                        <div class="layout-post-content">
                          <div class="layout-post-item">
                            
                            <p>AsyncTaskæ˜¯ç”¨æ¥åœ¨å®ç°åœ¨å­çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ååˆ‡æ¢åˆ°UIçº¿ç¨‹ï¼Œå¸¸è§çš„æ¯”å¦‚ä¸‹è½½ä»»åŠ¡çš„æ›´æ–°ï¼Œæ‰§è¡Œä¸‹è½½ååœ¨UIçº¿ç¨‹å®æ—¶æ›´æ–°è¿›åº¦æ¡ã€‚ç”±äºæ˜¯åŸºæœ¬çš„APIæ‰€ä»¥è¿˜æ˜¯å¾ˆæœ‰å¿…è¦äº†è§£æºç çš„ã€‚</p>
<!-- more -->
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>ä½¿ç”¨å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦æ˜¯å®ç°AsyncTaskç±»ï¼Œç„¶åæ‰§è¡Œexcuteæ–¹æ³•ã€‚å…¶ä¸­æœ‰3ä¸ªå‚æ•°å’Œ4ä¸ªæ–¹æ³•æ˜¯å¿…é¡»è¦æŒæ¡çš„ã€‚</p>
<pre><code>  private class MyAsyncTask extends AsyncTask&lt;String, String, String&gt; {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(String s) {
            super.onPostExecute(s);
        }

        @Override
        protected void onProgressUpdate(String... values) {
            super.onProgressUpdate(values);
        }

        @Override
        protected String doInBackground(String... strings) {
            return null;
        }
    }
</code></pre>
<h3 id="onpreexecute">onPreExecute</h3>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨UIçº¿ç¨‹æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨åå°ä»»åŠ¡å¼€å§‹å‰æ‰§è¡Œã€‚</p>
<h3 id="doinbackground">doInBackground</h3>
<p>è¿™ä¸ªåœ¨çº¿ç¨‹æ‰§è¡Œï¼Œè¿™é‡Œä¸»è¦æ˜¯åšè€—æ—¶ä»»åŠ¡ã€‚è¿™ä¸ªæ–¹æ³•æœ‰å‚æ•°å’Œè¿”å›å€¼ï¼Œå‚æ•°å°±æ˜¯åœ¨è°ƒç”¨executeä¼ è¿›æ¥çš„å‚æ•°ï¼Œè¿”å›å€¼å°±æ˜¯æˆ‘ä»¬ç»è¿‡ä¸€äº›åˆ—æ“ä½œåè¿”å›ç»™onProgressUpdateæ–¹æ³•çš„ï¼Œä¸»è¦ç”¨äºUIçš„æ›´æ–°ã€‚ä¾‹å¦‚æˆ‘ä¸‹è½½åˆ°50%ç„¶ååŒå¿—UIå®æ—¶æ›´æ–°ã€‚</p>
<h3 id="onprogressupdate">onProgressUpdate</h3>
<p>ä»æ–¹æ³•åçœ‹å°±æ˜¯æ›´æ–°è¿›åº¦ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯doInBackgroundä¸­è¿”å›çš„ã€‚</p>
<h3 id="onpostexecute">onPostExecute</h3>
<p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä»»åŠ¡æ‰§è¡Œå®Œæˆåè¦æ‰§è¡Œçš„æ–¹æ³•ã€‚å‚æ•°ä¹Ÿæ˜¯æ‰§è¡Œçš„ç»“æœã€‚</p>
<h3 id="ä¸‰ä¸ªå‚æ•°">ä¸‰ä¸ªå‚æ•°</h3>
<p>æŒæ¡äº†è¿™4ä¸ªæ–¹æ³•ï¼Œè¿™ä¸‰ä¸ªå‚æ•°å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p>
<p>ç¬¬ä¸€ä¸ªï¼Œæ˜¯ä¼ å…¥çš„å‚æ•°ã€‚</p>
<p>ç¬¬äºŒä¸ªï¼Œæ˜¯æ‰§è¡Œä»»åŠ¡æ—¶è¿›åº¦æ›´æ–°çš„å€¼ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªï¼Œä»»åŠ¡æ‰§è¡Œç»“æŸçš„è¿”å›å€¼ã€‚</p>
<h2 id="æºç ">æºç </h2>
<p>å…¶å®æºç æ— éå°±æ˜¯çœ‹å†…éƒ¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå’Œè¿™å‡ ä¸ªæ–¹æ³•çš„è°ƒç”¨æµç¨‹ã€‚æœ€ç›´è§‚çš„å°±ä»executeæ–¹æ³•å¼€å§‹ã€‚</p>
<pre><code> @MainThread
    public final AsyncTask&lt;Params, Progress, Result&gt; execute(Params... params) {
        return executeOnExecutor(sDefaultExecutor, params);
    }
</code></pre>
<p>è¿™é‡Œç›´æ¥è°ƒç”¨äº†executeOnExecutorï¼Œä¼ å…¥äº†sDefaultExecutorå’Œå‚æ•°ã€‚</p>
<pre><code> @MainThread
    public final AsyncTask&lt;Params, Progress, Result&gt; executeOnExecutor(Executor exec,
            Params... params) {
        if (mStatus != Status.PENDING) {
            switch (mStatus) {
                case RUNNING:
                    throw new IllegalStateException(&quot;Cannot execute task:&quot;
                            + &quot; the task is already running.&quot;);
                case FINISHED:
                    throw new IllegalStateException(&quot;Cannot execute task:&quot;
                            + &quot; the task has already been executed &quot;
                            + &quot;(a task can be executed only once)&quot;);
            }
        }

        mStatus = Status.RUNNING;

        onPreExecute();

        mWorker.mParams = params;
        exec.execute(mFuture);

        return this;
    }
</code></pre>
<p>å…ˆçœ‹ä¸‹è¿™ä¸ªå‡½æ•°é‡Œé¢éƒ½åšäº†ä»€ä¹ˆï¼Œåœ¨åˆ†æsDefaultExecutorã€‚executeOnExecutorè¿™ä¸ªå‡½æ•°æ˜¯publicçš„æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªå‡½æ•°æ‰§è¡Œä»»åŠ¡ã€‚å¦‚æœæˆ‘ä»¬é€šè¿‡executeOnExecutor()è¿™ä¸ªæ–¹æ³•çš„è¯å°±è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªExecutorï¼Œå› ä¸ºé»˜è®¤çš„Executoræ˜¯ä½¿ç”¨é˜Ÿåˆ—ç»´æŠ¤åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¤šä»»åŠ¡æ—¶ä¼šè¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œåé¢ä¼šè®²åˆ°ã€‚</p>
<p>é¦–å…ˆï¼Œè¿›æ¥å…ˆåˆ¤æ–­çŠ¶æ€ï¼Œå¦‚æœå¦‚æœä¸æ˜¯æ²¡æ‰§è¡Œè¿‡çš„è¦æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœæ‰§è¡Œä¸¤æ¬¡ä»»åŠ¡ä¼šæŠ¥java.lang.IllegalStateExceptionè¿™ä¸ªé”™çš„åŸå› ã€‚</p>
<p>å…¶æ¬¡ï¼Œå°†çŠ¶æ€æ”¹ä¸ºæ­£åœ¨æ‰§è¡Œã€‚</p>
<p>ç„¶åï¼Œæ‰§è¡ŒonPreExecute()æ–¹æ³•ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ³•åœ¨ä¸»çº¿ç¨‹ï¼Œè€Œä¸”åœ¨ä»»åŠ¡å‰æ‰§è¡Œã€‚</p>
<p>å†ç„¶åå¼€å§‹æ‰§è¡ŒExecutorçš„ä»»åŠ¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åˆ†æsDefaultExecutoräº†ã€‚</p>
<p>ç±»é‡Œå¯ä»¥çœ‹åˆ°</p>
<pre><code>private static volatile Executor sDefaultExecutor = SERIAL_EXECUTOR;

public static final Executor SERIAL_EXECUTOR = new SerialExecutor();

</code></pre>
<p>è¿™ä¸¤ä¸ªå¸¸é‡å…¶å®å°±æ˜¯é»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªExecutor</p>
<pre><code>
    private static class SerialExecutor implements Executor {
        final ArrayDeque&lt;Runnable&gt; mTasks = new ArrayDeque&lt;Runnable&gt;();
        Runnable mActive;

        public synchronized void execute(final Runnable r) {
            mTasks.offer(new Runnable() {
                public void run() {
                    try {
                        r.run();
                    } finally {
                        scheduleNext();
                    }
                }
            });
            if (mActive == null) {
                scheduleNext();
            }
        }

        protected synchronized void scheduleNext() {
            if ((mActive = mTasks.poll()) != null) {
                THREAD_POOL_EXECUTOR.execute(mActive);
            }
        }
    }
</code></pre>
<p>è¿™ä¸ªSerialExecutoré‡Œé¢ç»´æŠ¤äº†ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åé€šè¿‡offer()åœ¨é˜Ÿåˆ—çš„æœ«å°¾åŠ å…¥ä»»åŠ¡ï¼Œé€šè¿‡poll()åœ¨å¤´éƒ¨æ£€ç´¢å‡ºä»»åŠ¡å¹¶åˆ é™¤ï¼Œæ£€ç´¢åèµ‹å€¼ç»™mActiveã€‚å› ä¸ºé¦–æ¬¡mActiveä¸ºnullï¼Œæ‰€ä»¥åŠ å…¥äº†åˆ¤æ–­mActive==nullçš„æ—¶å€™æ‰§è¡ŒscheduleNext(),åé¢å†æœ‰ä»»åŠ¡æ¥çš„è¯mActiveå°±ä¸æ˜¯nulläº†ï¼Œæ‰€ä»¥æ˜¯åœ¨runableä¸­ï¼Œé€šè¿‡finallyè°ƒç”¨äº†scheduleNext()ï¼Œè¿™æ—¶å€™å°±ä¼šç­‰ä»»åŠ¡æ‰§è¡Œå®Œæˆååœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚è¿™å°±æ˜¯ä¸Šé¢è¯´çš„ä¸ºä»€ä¹ˆé»˜è®¤çš„SerialExecutoråªèƒ½åŒæ—¶åœ¨ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</p>
<pre><code>    /**
     * An {@link Executor} that can be used to execute tasks in parallel.
     */
    public static final Executor THREAD_POOL_EXECUTOR;

    static {
        ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(
                CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE_SECONDS, TimeUnit.SECONDS,
                sPoolWorkQueue, sThreadFactory);
        threadPoolExecutor.allowCoreThreadTimeOut(true);
        THREAD_POOL_EXECUTOR = threadPoolExecutor;
    }
</code></pre>
<p>è¿™ä¸ªä¸»è¦å°±æ˜¯é€šè¿‡å„ç§é»˜è®¤ä¸ºçš„å‚æ•°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹æ± å»æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>è¿™å°±æ˜¯ä¸»è¦æµç¨‹ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæµç¨‹ä¸­è¿˜å¿½ç•¥äº†å¾ˆå¤šå†…å®¹ï¼Œåœ¨æˆ‘ä»¬äº†è§£äº†æ•´ä½“æ¡†æ¶æµç¨‹åï¼Œåœ¨å»å¡«å……æˆ‘ä»¬æƒ³çŸ¥é“çš„ç»†èŠ‚ï¼Œå°±æ›´å®¹æ˜“ç†è§£äº†ã€‚</p>
<p>é¦–å…ˆçœ‹executeOnExecutor()æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„å†…å®¹ä¸€ä¸ªæ˜¯mWorkerå’ŒmFutureã€‚å…¶å®æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ä¼ å…¥äº†mFutureï¼Œè€ŒmFutureæ˜¯ä¸€ä¸ªmFutureTaskçœŸæ­£æ‰§è¡Œçš„æ˜¯mWorkerã€‚</p>
<pre><code>     /**
     * Creates a new asynchronous task. This constructor must be invoked on the UI thread.
     */
    public AsyncTask() {
        this((Looper) null);
    }

    /**
     * Creates a new asynchronous task. This constructor must be invoked on the UI thread.
     *
     * @hide
     */
    public AsyncTask(@Nullable Handler handler) {
        this(handler != null ? handler.getLooper() : null);
    }

    /**
     * Creates a new asynchronous task. This constructor must be invoked on the UI thread.
     *
     * @hide
     */
    public AsyncTask(@Nullable Looper callbackLooper) {
        mHandler = callbackLooper == null || callbackLooper == Looper.getMainLooper()
            ? getMainHandler()
            : new Handler(callbackLooper);

        mWorker = new WorkerRunnable&lt;Params, Result&gt;() {
            public Result call() throws Exception {
                mTaskInvoked.set(true);
                Result result = null;
                try {
                    Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
                    //noinspection unchecked
                    result = doInBackground(mParams);
                    Binder.flushPendingCommands();
                } catch (Throwable tr) {
                    mCancelled.set(true);
                    throw tr;
                } finally {
                    postResult(result);
                }
                return result;
            }
        };

        mFuture = new FutureTask&lt;Result&gt;(mWorker) {
            @Override
            protected void done() {
                try {
                    postResultIfNotInvoked(get());
                } catch (InterruptedException e) {
                    android.util.Log.w(LOG_TAG, e);
                } catch (ExecutionException e) {
                    throw new RuntimeException(&quot;An error occurred while executing doInBackground()&quot;,
                            e.getCause());
                } catch (CancellationException e) {
                    postResultIfNotInvoked(null);
                }
            }
        };
    }

</code></pre>
<p>åœ¨æ„é€ é‡Œåˆ›å»ºäº†ä¸‰éƒ¨åˆ†å†…å®¹ï¼ŒmHandlerã€mWorkerã€mFutur</p>
<p>å¯ä»¥çœ‹åˆ°é¦–å…ˆä¼šåˆ›å»ºhandlerå› ä¸ºï¼Œçº¿ç¨‹é€šä¿¡è¿˜æ˜¯éœ€è¦ä¾é Handlerã€‚ç„¶åmWorkerä¸­ä¸»è¦å°±æ˜¯æ‰§è¡ŒdoInBackground()ç„¶åå°†resultä¼ ç»™postResultã€‚</p>
<pre><code>private Result postResult(Result result) {
        @SuppressWarnings(&quot;unchecked&quot;)
        Message message = getHandler().obtainMessage(MESSAGE_POST_RESULT,
                new AsyncTaskResult&lt;Result&gt;(this, result));
        message.sendToTarget();
        return result;
    }

  
</code></pre>
<p>postResultä¸»è¦å°±æ˜¯é€šè¿‡handlerå‘é€ä¸€ä¸ªwhatä¸ºMESSAGE_POST_RESULTï¼Œobjä¸ºresultçš„messageã€‚</p>
<pre><code> private static class InternalHandler extends Handler {
        public InternalHandler(Looper looper) {
            super(looper);
        }

        @SuppressWarnings({&quot;unchecked&quot;, &quot;RawUseOfParameterizedType&quot;})
        @Override
        public void handleMessage(Message msg) {
            AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj;
            switch (msg.what) {
                case MESSAGE_POST_RESULT:
                    // There is only one result
                    result.mTask.finish(result.mData[0]);
                    break;
                case MESSAGE_POST_PROGRESS:
                    result.mTask.onProgressUpdate(result.mData);
                    break;
            }
        }
    }
    
</code></pre>
<p>è¿™æ—¶å€™çœ‹handleMessageæ˜¯æ€ä¹ˆå¤„ç†çš„ã€‚<br>
è¿™é‡Œä¸»è¦æ˜¯è°ƒç”¨åŒºåˆ†whatæ˜¯å®Œæˆè¿˜æ˜¯æœªå®Œæˆå®Œæˆçš„è¯å°±æ˜¯è°ƒç”¨finishæ–¹æ³•ï¼Œæœªå®Œæˆå°±æ˜¯onProgressUpdateæ–¹æ³•ï¼Œ</p>
<pre><code>    private void finish(Result result) {
        if (isCancelled()) {
            onCancelled(result);
        } else {
            onPostExecute(result);
        }
        mStatus = Status.FINISHED;
    }

</code></pre>
<p>åœ¨çœ‹finishæ–¹æ³•å°±æ˜¯åˆ¤æ–­æ˜¯å¦å–æ¶ˆç„¶åè°ƒç”¨onPostExecutæ–¹æ³•å°†ç»“æœä¼ å…¥ã€‚<br>
hadlerMessageè¿˜å¤„ç†ä¸€ä¸ªå°±æ˜¯æ›´æ–°è¿›åº¦ï¼Œé‚£è¿™ä¸ªmessageæ˜¯åœ¨å“ªé‡Œå‘çš„å‘¢ï¼Ÿ</p>
<pre><code>   protected final void publishProgress(Progress... values) {
        if (!isCancelled()) {
            getHandler().obtainMessage(MESSAGE_POST_PROGRESS,
                    new AsyncTaskResult&lt;Progress&gt;(this, values)).sendToTarget();
        }
    }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡publishProgressè¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœéœ€è¦æ›´æ–°è¿›åº¦çš„è¯è¦è‡ªå·±åœ¨doInBackgroundè¿™ä¸ªæ–¹æ³•é‡Œè°ƒç”¨publishProgress()æ–¹æ³•ä¼ å…¥è¿›åº¦ã€‚ç„¶ååœ¨æ‰ä¼šåœ¨onProgressUpdate()è¿™ä¸ªæ–¹æ³•ä¸­æ”¶åˆ°ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>è‡³æ­¤ æ•´ä¸ªæµç¨‹ä¹Ÿå°±æ¸…æ™°äº†ï¼Œè¿™å››ä¸ªæ–¹æ³•æ˜¯åˆ†åˆ«åœ¨å“ªé‡Œè°ƒç”¨çš„åœ¨èƒ½å®ç°å¼‚æ­¥ç„¶åæ›´æ–°UIçš„åŠŸèƒ½ï¼Œå…¶å®åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨äº†ä¸€ä¸ªçº¿åŸæ± ç„¶åæˆ‘ä»¬åœ¨å­çº¿ç¨‹å®æ—¶é€šè¿‡Handlerå‘é€Messageåˆ°UIçº¿ç¨‹ä¸­æ‰§è¡Œè¿›åº¦çš„ä»»åŠ¡ï¼Œé»˜è®¤é€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—ç»´æŠ¤ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰Executoræ¥å®ç°å¤šçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</p>

                          </div>
                        </div>
                        <div class="layout-post-social">
                          <div class="item reader">
                            <div id="/post/AsyncTaskæºç è§£æ/" class="leancloud-visitors view"
                              data-flag-title="AsyncTaskæºç è§£æ">
                              <span class="post-meta-item-text">é˜…è¯» </span>
                              <span class="leancloud-visitors-count"></span>
                            </div>
                          </div>
                        </div>

                        <div class="layout-post-navigation">
                          <div class="navigation-list">
                            
                            <div class="post-card row">
                              
                              <div class="card-content col-12">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="http://xuanguofeng.com/post/ã€é—®é¢˜æ—¥å¿—ã€‘ä½ç‰ˆæœ¬dexæ‹†åˆ†é—®é¢˜/" class="title">
                                      <h4>é—®é¢˜æ—¥å¿—-ä½ç‰ˆæœ¬Didn&#39;t find class &#34;~FileProvider&#34;</h4>
                                    </a>
                                  </div>
                                  <div class="inner">
                                    <div class="abstract">
                                      <p>ç”±äºåœ¨ä½ç‰ˆæœ¬çš„ç³»ç»Ÿä¸­ï¼Œä¼šæç¤ºDidn't find class &quot;android.support.v4.content.FileProvider&quot;é—®é¢˜ï¼Œæ‰€ä»¥æŸ¥æ‰¾äº†ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p>

                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>ä¸Šä¸€ç¯‡</span></div>
                                  <div class="item">2019-06-20</div>
                                </div>
                              </div>
                              
                            </div>

                            <div class="post-card row">
                              
                              <div class="card-content col-8 col-md-9">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="http://xuanguofeng.com/post/hello-gridea/" class="title">
                                      <h4>Hello Gridea</h4>
                                    </a>
                                  </div>
                                  <div class="inner d-none d-sm-block">
                                    <div class="abstract">
                                      <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼</p>

                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>ä¸‹ä¸€ç¯‡</span></div>
                                  <div class="item">2018-12-12</div>
                                </div>
                              </div>
                              <div class="card-thumb col-4 col-md-3">
                                <div class="thumb">
                                  <a href="http://xuanguofeng.com/post/hello-gridea/"
                                    style="background-image: url('http://xuanguofeng.com/post-images/hello-gridea.png');"></a>
                                </div>
                              </div>
                              
                            </div>

                            
                          </div>
                        </div>

                        <div class="layout-comments"></div>
                        
                      </div>
                    </div>

                    <div class="col-12 col-lg-2 d-none d-lg-block">
                      <div class="layout-post-sidebar">
                        <div class="layout-sidebar-item">
                          <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a>
<ul>
<li><a href="#onpreexecute">onPreExecute</a></li>
<li><a href="#doinbackground">doInBackground</a></li>
<li><a href="#onprogressupdate">onProgressUpdate</a></li>
<li><a href="#onpostexecute">onPostExecute</a></li>
<li><a href="#%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0">ä¸‰ä¸ªå‚æ•°</a></li>
</ul>
</li>
<li><a href="#%E6%BA%90%E7%A0%81">æºç </a></li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
</li>
</ul>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="layout-totop d-none"><i class="fa fa-angle-up" aria-hidden="true"></i></div>

    	<div class="layout-footer">

		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">
					<div class="footer">
						<div class="row">
							<div class="col-12 col-md-9">
								<div class="footer-copy">
									
									Â©å¼€é£æœºçš„è€èˆ’å…‹  2019
									<div class="footer-icp d-none d-sm-inline-block">
										<span class="px-2">â‹…</span>
										
									</div>
								</div>
							</div>
							<div class="col-sm-3 d-none d-md-block">
								<div class="footer-links">
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script type="text/javascript" src='http://xuanguofeng.com/media/scripts/main.js'></script>
	

  </div>
</body>

</html>